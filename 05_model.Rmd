# Model

"Models are complementary tools to visualisation. Once you have made your questions sufficiently precise, you can use a model to answer them. Models are a fundamentally mathematical or computational tool, so they generally scale well. ... But every model makes assumptions, and by its very nature a model cannot question its own assumptions. That means a model cannot fundamentally surprise you. 
- Garrett Grolemund & Hadley Wickham, *R for Data Science*"

`{base}`

- `I()`
  - Use when raising a variable to an exponent in order to evaluate the value as a mathematical expression rather than as an interaction variable.
- `sample()`
- `set.seed()`
- `summary()`
  - Pass the model as the data argument.

`{broom}`

- `augment()`
  - Augment data with information from an object.
- `glance()`
  - Construct a single row summary of a model, fit, or other object.
- `tidy()`
  - Turn an object into a tidy tibble.

`{caret}`



`{class}`

- `knn()`

`{cluster}`

- `pam()`
  - Useful for silhouette analysis; similar but not identical to `stats::kmeans()`.

`{dplyr}`

- `sample_n()`

`{gbm}`

`{infer}`

- Useful for hypothesis (significance) testing.


`{MatchIt}`

- `match.data()`
- `matchit()`

`{mgcv}`

- `gam()`
  - Generalized additive models (GAMs) with integrated smoothness estimation.
  - Use `plot()` on a GAM object to view what the function learned from the data.
- `s()`
  - Indicates which of the explanatory variables should be considered non-linearly.
  - Use on continuous variables and avoid using on categorical variables.

`{mixtools}`



`{naivebayes}`

- `naive_bayes()`

`{[performance](https://easystats.github.io/performance/?utm_campaign=Data_Elixir&utm_source=Data_Elixir_384)}`


`{pROC}`

- `auc()`
- `roc()`

`{randomForest}`

See `{ranger}`.

- `randomForest()`

`{ranger}`

See `{randomForest}`.

- `ranger()`

`{rpart}`

- `rpart()`

`{rpart.plot}`

- `rpart.plot()`

`{rsample}`



`{sigr}`

- `wrapChiSqTest()`
  - For Pseudo-R^2:
    - On training data, use `wrapChiSqTest(model)`. For test data, use `wrapChiSqTest(prediction_column_name, outcome_column_name, target_value)`.

`{stats}`

- `as.formula()`
  - Use to define an object to pass as a formula into a model (e.g., `fmla <- as.formula("unemployment ~ population"), lm(fmla, data)`)
- `coef()`
  - Extract model coefficients.
- `cor()`
- `cov()`
- `cov2cor()`
  - Scale a covariance matrix into a correlation matrix.
- `cutree()`
  - Pair with `stats::hclust()`.
- `df.residual()`
  - Get the residual degrees of freedom.
- `dist()`
- `glm()`
  - For `family = Gamma`, consider using `(link = "log")` rather than the default. Use `expm1()` on the coefficients to tranform them into a percentage, which is easier to interpret than a logged coefficient value.
- `hclust()`
- `kmeans()`
- `lm()`
  - Fit linear models.
- `model.matrix()`
  - Use to create dummy variables from categorical data.
  - See `{vtreat}` functions.
- `p.adjust()`
  - Adjust p-values for multiple comparisons.
- `pairwise.t.test()`
- `prcomp()`
  - Principal Component Analysis.
- `predict()`
  - Model predictions.
  - For `lm` class objects, predict new values using `predict(model, newdata)`.
  - For `glm` class objects, predict new values using `predict(model, newdata, type = "response")` (`predict()` returns the log-odds of the event, instead of the probability, if `type = "response"` is not included).
  - For GAM, `predict()` returns a matrix so use `as.numeric()` to convert the matrix to a vector if adding to a data set (such as for plotting the predictions versus the actual outcomes).
  - Access the y values of the model using `predict(model, type = "terms")`.
- `prop.test()`
  - See `infer::prop_test()`.
- `residuals()`
  - Extract model residuals.
- `step()`
  - Step-wise regression.
- `t.test()`
  - See `infer::t_test()`.

`{tidyr}`

- `nest()`
  - Nest repeated values in a list-variable.
  - Helpful when separating a data frame in preparation to model the data for each grouping.
  
`{vtreat}`

Compared to `stats::model.matrix()`, `{vtreat}` functions allow for handling new categorical variables in the test data not seen in the training data.

- `designTreatmentsZ()`
- `kWayCrossValidation()`
- `prepare()`
- `splitPlan()`
  - Use to create a cross-validation plan.

`{WVPlots}`

- `GainCurvePlot()`
  - Use to evaluate logistic regression models.

`{xgboost}`

- `xgb.cv()`
  - Use `xgb.cv()$evaluation_log` to find the number of trees that minimizes RMSE (input that number as the `nrounds` argument in `xgboost()`).
